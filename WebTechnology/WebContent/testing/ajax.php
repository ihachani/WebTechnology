<!DOCTYPE html>
<html>

<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- Bootstrap -->
<link href="bootstrap/bootstrap.min.css" rel="stylesheet" media="screen">
<link href="css/font-awesome.min.css" rel="stylesheet" media="screen">
<link href="css/bootflat.css" rel="stylesheet" media="screen">
<link href="css/bootflat-extensions.css" rel="stylesheet" media="screen">
<link href="css/bootflat-square.css" rel="stylesheet" media="screen">

</head>

<body>
	<button id="getxml">xml</button>

	<div id="content">
		<div class="media">
			<a class="pull-left" href="#"><img class="media-object img-rounded"
				data-src="holder.js/48x48/new" alt="48x48"
				src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAACHElEQVRoge2UTWsTQQCG+8e2NVFpsVgQPIjam4jgQfQkeBAFQawnvfgDhO5KokGNNrWFkmp6CNra1hq/oGk22XwnzaZNdje7j4e0tnqx7EJHYRaeyzL7zvvMzsyAoub4nxkQXUAKiC4gBUQXkAKiC0gB0QWkgOgCUkB0ASkguoAUEF1AChxk0NCzCtMWAKx/NAipORStwLVPHXSn/x7b4d1ymVHtcPMOIJDn6o8eu8/uhEenWhgAZpuJVIOpLQCHR3H9UPP+KjAya1J0bbTlLr19E4biTb4CdrnO+ViRhzXAs7j3XOfcooULrH4wOBarMmcDbZPLUT95Af7AYKSEanpk10qcSnZ+m1BRdcYXu3R+raXLQtogrOZQnhg8qAKuxZuiCzhoMzpDfvP8CeicXbLpWdvcSRhcSFt4QCFT4cxTnfCrJl8At97idrJGdBNwu9x/0f8+HG+w6vWrFDIlhgPm+RK49H1vr+5/jLUipxf6p/Dbe4Mjqs74Sv/0pZN5FDXH8ekW2Z3xm9kqY1qwPF9baDRR4Waqxq1UjbsZG4D6RoPrr/MMz7RpAF7TZCLV4KUJ0GMyoTMYKfG4BdgdJtd7gMvsfIGTPvMCX6OKmmPkzz2r5bmy0mHD3llGy2ZuqcQJTefiZwfweJsqEIqWiWwB1jY3Yn7yAl+j/zZSQDRSQDRSQDRSQDRSQDRSQDRSQDRSQDRSQDRSQDQ/AT40qTLlbn5zAAAAAElFTkSuQmCC"
				style="width: 48px; height: 48px;"></a>
			<div class="media-body">
				<h4 class="media-heading">Media heading</h4>
				<p>Some Text</p>
				<p class="price">500</p>
			</div>
		</div>

		<div class="media">
			<a class="pull-left" href="#"><img class="media-object img-rounded"
				data-src="holder.js/48x48/new" alt="48x48"
				src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAACHElEQVRoge2UTWsTQQCG+8e2NVFpsVgQPIjam4jgQfQkeBAFQawnvfgDhO5KokGNNrWFkmp6CNra1hq/oGk22XwnzaZNdje7j4e0tnqx7EJHYRaeyzL7zvvMzsyAoub4nxkQXUAKiC4gBUQXkAKiC0gB0QWkgOgCUkB0ASkguoAUEF1AChxk0NCzCtMWAKx/NAipORStwLVPHXSn/x7b4d1ymVHtcPMOIJDn6o8eu8/uhEenWhgAZpuJVIOpLQCHR3H9UPP+KjAya1J0bbTlLr19E4biTb4CdrnO+ViRhzXAs7j3XOfcooULrH4wOBarMmcDbZPLUT95Af7AYKSEanpk10qcSnZ+m1BRdcYXu3R+raXLQtogrOZQnhg8qAKuxZuiCzhoMzpDfvP8CeicXbLpWdvcSRhcSFt4QCFT4cxTnfCrJl8At97idrJGdBNwu9x/0f8+HG+w6vWrFDIlhgPm+RK49H1vr+5/jLUipxf6p/Dbe4Mjqs74Sv/0pZN5FDXH8ekW2Z3xm9kqY1qwPF9baDRR4Waqxq1UjbsZG4D6RoPrr/MMz7RpAF7TZCLV4KUJ0GMyoTMYKfG4BdgdJtd7gMvsfIGTPvMCX6OKmmPkzz2r5bmy0mHD3llGy2ZuqcQJTefiZwfweJsqEIqWiWwB1jY3Yn7yAl+j/zZSQDRSQDRSQDRSQDRSQDRSQDRSQDRSQDRSQDRSQDQ/AT40qTLlbn5zAAAAAElFTkSuQmCC"
				style="width: 48px; height: 48px;"></a>
			<div class="media-body">
				<h4 class="media-heading">Media heading</h4>
				<p>Some Text</p>
				<p class="price">500</p>
			</div>
		</div>
		<div class="media">
			<a class="pull-left" href="#"><img class="media-object img-rounded"
				data-src="holder.js/48x48/new" alt="48x48"
				src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAACHElEQVRoge2UTWsTQQCG+8e2NVFpsVgQPIjam4jgQfQkeBAFQawnvfgDhO5KokGNNrWFkmp6CNra1hq/oGk22XwnzaZNdje7j4e0tnqx7EJHYRaeyzL7zvvMzsyAoub4nxkQXUAKiC4gBUQXkAKiC0gB0QWkgOgCUkB0ASkguoAUEF1AChxk0NCzCtMWAKx/NAipORStwLVPHXSn/x7b4d1ymVHtcPMOIJDn6o8eu8/uhEenWhgAZpuJVIOpLQCHR3H9UPP+KjAya1J0bbTlLr19E4biTb4CdrnO+ViRhzXAs7j3XOfcooULrH4wOBarMmcDbZPLUT95Af7AYKSEanpk10qcSnZ+m1BRdcYXu3R+raXLQtogrOZQnhg8qAKuxZuiCzhoMzpDfvP8CeicXbLpWdvcSRhcSFt4QCFT4cxTnfCrJl8At97idrJGdBNwu9x/0f8+HG+w6vWrFDIlhgPm+RK49H1vr+5/jLUipxf6p/Dbe4Mjqs74Sv/0pZN5FDXH8ekW2Z3xm9kqY1qwPF9baDRR4Waqxq1UjbsZG4D6RoPrr/MMz7RpAF7TZCLV4KUJ0GMyoTMYKfG4BdgdJtd7gMvsfIGTPvMCX6OKmmPkzz2r5bmy0mHD3llGy2ZuqcQJTefiZwfweJsqEIqWiWwB1jY3Yn7yAl+j/zZSQDRSQDRSQDRSQDRSQDRSQDRSQDRSQDRSQDRSQDQ/AT40qTLlbn5zAAAAAElFTkSuQmCC"
				style="width: 48px; height: 48px;"></a>
			<div class="media-body">
				<h4 class="media-heading">Media heading</h4>
				<p>Some Text</p>
				<p class="price">500</p>
			</div>
		</div>
	</div>
	<div id="content"></div>
	<div id="page">
		<ul class="pagination">
			<li id="prev" class="active nv"><a href="#">PREV</a></li>
			<li id="next" class="active nv"><a href="#">NEXT</a></li>
		</ul>
	</div>
	<button id='chgnb' class="form-control">change elnumber</button>



	<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
	<script src="//code.jquery.com/jquery.js"></script>
	<!-- Include all compiled plugins (below), or include individual files as needed -->
	<script src="js/bootstrap.min.js"></script>
	<script src="js/pagination.js" type="text/javascript"></script>
	<script>
	/*var curr;
	var pgLn = 2;
	var elNb;
	var pgN;

	function main(tab) {
		$(function() {
			affiche(1, tab);
			genPag();
			$('#page').on(
					'click',
					'li',
					function() {
						if ($(this).text() == "PREV") {
							$('.pagination li.active').each(
									function() {
										if (($(this).text() != "PREV")
												&& ($(this).text() != "NEXT"))
											$(this).removeClass('active');
									});
							affiche((curr - 1), tab);
							$('.pagination li').each(function() {
								if ($(this).text() == curr.toString())
									$(this).addClass('active');
							});
						} else if ($(this).text() == "NEXT") {
							$('.pagination li.active').each(
									function() {
										if (($(this).text() != "PREV")
												&& ($(this).text() != "NEXT"))
											$(this).removeClass('active');
									});
							affiche((curr + 1), tab);
							$('.pagination li').each(function() {
								if ($(this).text() == curr.toString())
									$(this).addClass('active');
							});
						} else {
							var nb = parseInt($(this).text());
							affiche(nb, tab);
							$('.pagination li.active').each(
									function() {
										if (($(this).text() != "PREV")
												&& ($(this).text() != "NEXT"))
											$(this).removeClass('active');
									});
							$(this).addClass('active');
						}
					});
			$("button").click(function() {
				$(".pagination li:not(.nv)").remove();
				genPag();
			});
		});
	}
	
	function createElement(item) {
		a = $('<a>', {
			class : 'pull-left',
			href : '#'
		});
		img = $('<img>', {
			class : 'media-object img-rounded',
			alt : "48x48"
		});
		img.attr("src", item.img);
		a.append(img);
		div = $('<div>', {
			class : 'media-body'
		});
		h = $('<h4>', {
			class : 'media-heading'
		});
		h.text("Produit: " + item.nom);
		price = $('<p>', {
			class : 'price'
		});
		price.text("Prix: " + item.prix);
		div.append(h);
		div.append(price);
		retval = $('<div>', {
			class : 'media'
		});
		retval.append(a);
		retval.append(div);
		return retval;
	}

		
	function affiche(nb, tab) {
		$("#content *").remove();
		for (var i = (nb - 1) * pgLn; (i < nb * pgLn) && (i < elNb); i++) {
			createElement(tab[i]).appendTo($("#content"));
		}
		curr = nb;
		if (curr == 1) {
			$("#prev").hide();
			$("#next").show();
		} else {
			$("#prev").show();
			if (curr == pgN)
				$("#next").hide();
			else
				$("#next").show();
		}
	}

	function genPag() {
		$(".pagination li:not(.nv)").remove();
		if (pgN == 1) {
			$("#prev").hide();
			$("#next").hide();
		} else {
			$("#prev").after('<li class="active"><a href="#">1</a></li>');
			for (i = 2; i < (pgN + 1); i++) {
				$("#next").before('<li><a href="#">' + i + '</a></li>');
			}
		}

	}
	*/	
	var res;
		$(document).ready(function(){
			$("#getxml").click(function(){
				$.ajax({
					url: 'request.php',
					type: 'post',
					data: {'action': 'getxml'},
					dataType: 'json',
					success: function(data) {
						//str = JSON.stringify(data, undefined, 2);
						elNb = data.length;
						pgN = ((elNb % pgLn) == 0) ? (Math.floor(elNb / pgLn)) : ((Math.floor(elNb
								/ pgLn)) + 1);
						//alert(data[0].id);
						//affiche(1, data);
						//genPag();
						main(data);
						res = data;
								$.each(data,function(i,item){
									$("#Product"+i+" p:first").text("id: "+item.id);
									$("#Product"+i+" img").attr("src",item.img);
									$("#Product"+i+" h4").text("Produit: " +item.nom);
									$("#Product"+i+" .price").text("Prix: " +item.prix);
									$("div").show(1000);
									});
						},
						error: function(xhr, desc, err) {
							console.log(xhr);
							console.log("Details: " + desc + "\nError:" + err);
							}
						}); // end ajax call	
				});
			});
		$(document).on('click','#chgnb',function(){
			/*pgLn = 1;
			elNb = res.length;
			pgN = ((elNb % pgLn) == 0) ? (Math.floor(elNb / pgLn)) : ((Math.floor(elNb
					/ pgLn)) + 1);
			affiche(1, res);
			genPag();*/
			updatepgL(res,2);

		});	
	</script>
</body>
</html>