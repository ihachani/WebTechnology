<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>image Div</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- Bootstrap -->
<link href="bootstrap/bootstrap.min.css" rel="stylesheet" media="screen">
<link href="css/font-awesome.min.css" rel="stylesheet" media="screen">
<link href="css/bootflat.css" rel="stylesheet" media="screen">
<link href="css/bootflat-extensions.css" rel="stylesheet" media="screen">
<link href="css/bootflat-square.css" rel="stylesheet" media="screen">
<link href="css/imgdiv.css" rel="stylesheet" media="screen">
</head>
<body>
	<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
	<script src="//code.jquery.com/jquery.js"></script>
	<!-- Include all compiled plugins (below), or include individual files as needed -->
	<script src="js/bootstrap.min.js"></script>
	<script type="text/javascript">
		function createImageDiv(item) {
			retval = $('<div>', {
				class : 'imgdiv',
			}).css('background-image', 'url(' + item.image + ')');
			toolbar = $('<div>', {
				class : 'toolbar'
			});
			toolbar.append($('<p>').text(item.nom));
			price = $('<p>', {
				class : 'price'
			});
			price.html('<span>' + item.prix + '</span> DT');
			toolbar.append(price);
			toolbar.append($('<button>', {
				target : item.id
			}).text('acheter'));
			filtre = $('<div>', {
				class : 'filtre'
			});
			filtre.append(toolbar);
			retval.append(filtre);
			return retval;
		}
		function imageDivFiltre() {
			$(document).on('mouseenter', '.imgdiv', function() {
				$('.filtre', this).show(200);
			});
			$(document).on('mouseleave', '.imgdiv', function() {
				$('.filtre', this).hide(100);
			});
		}
		$(function() {
			$.ajax({
				url : 'produit.php',
				type : 'post',
				data : {
					'action' : 'showprod',
				},
				dataType : 'json',
				success : function(data) {
					$.each(data, function(key, value) {
						$('body').append(createImageDiv(value));
					});
				},
				error : function(xhr, desc, err) {
					console.log(xhr);
					console.log("Details: " + desc + "\nError:" + err);
				}
			});
			imageDivFiltre();
		});
		/*$('.imgdiv').hover(function() {
			$('.filtre', this).toggle(300);
		});*/
	</script>
</body>
</html>